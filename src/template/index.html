<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			border: none;
			user-select: none;
			outline: none;
		}
		main {
			display: flex;
			flex-direction: column;
			width: 100dvw;
			height: 100dvh;
			align-items: center;
			justify-content: center;
			
			> div {
				display: flex;
				flex-direction: column;
				height: 100%;
				width: 100%;
				align-items: center;
				
				> .head{
					display: flex;
					flex-direction: column;

					> #nav{
						display: flex;
						flex-direction: row;
						gap: 1rem;
						list-style: none;

						li {
							list-style: none;
						}
					}
				}
				
				> .inner {
					display: flex;
					flex-direction: row;

					> div{
						display: flex;
						flex-direction: row;
						gap: 1rem;
						list-style: none;
	
						li {
							list-style: none;
						}
				}
				
				> #male {
					border-left: 1px black solid;
					padding-left: .5rem;

					img {
						aspect-ratio: 9/16;
						width: 3rem;
					}
				}
				> #female {
					border-right: 1px black solid;
					padding-right: .5rem;
					
					img {
						aspect-ratio: 9/16;
						width: 3rem;
					}
				}
			}
		}
	</style>
</head>
<body>
	<main>
		<div>
			<div>
				<h3>Mr. and Ms. DLL Scorer</h3>
			</div>
			<div class="head">
				<ul id="nav">
			</div>
			<div class="inner">
				<div id="female"></div>
				<div id="male"></div>
			</div>
		</div>
	</main>
</body>
<script>
	const categories = [
		"Gown",
		"Insti"
	];

	for(let category of categories){
		document.getElementById("nav").innerHTML += `<li>${category}</li>`;
	}

	function data(){
		return JSON.parse(localStorage.getItem("pageant") ?? "{}");
	}

	function setData(data){
		localStorage.setItem("pageant", data);
	}

	async function sendCloudData(judge, data){
		// const response = await fetch("/send-result",{
		//     method: "POST",
		//     headers: {
		//         "Content-Type": "application/json"
		//     },
		//     body: JSON.stringfy({
		//         `judge_${judge}`: data
		//     });
		// })
		
		// if(!response.ok){
		//     alert("Server is not asccessible");
		// }
		// TODO: To add success message
	}

	async function cloudData(judge){
		const response = await fetch(`/get-result/?judge=judge_${judge}`);
		if(!response.ok){
			alert("Server is not accessible");
		}
	}

	async function candidates(){
		const response = await fetch("/candidates?code=missnapokita",{
			method: "GET"
		})
		console.log(response)
		if(!response.ok){
			return alert("Server is not accessible")
		}

		const data = await response.json()
		const female = data['female']
		const male = data['male']
		
		const m_ul = document.createElement("ul")
		for(const m of male){
			const li = document.createElement("li")
			const img = document.createElement("img")
			const span = document.createElement("span")
			img.src = `/assets/male/${m}.png`
			span.textContent = m
			li.appendChild(img)
			li.appendChild(span)
			m_ul.appendChild(li)
		}
		document.getElementById("male").appendChild(m_ul)

		const f_ul = document.createElement("ul")
		for(const f of female){
			const li = document.createElement("li")
			const img = document.createElement("img")
			const span = document.createElement("span")
			img.src = `/assets/female/${f}.png`
			span.textContent = f
			li.appendChild(img)
			li.appendChild(span)
			f_ul.appendChild(li)
		}
		document.getElementById("female").appendChild(f_ul)
	}

	candidates()
</script>
</html>